<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Workbench - Folder Structure Visualizer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header id="header">
        <h1 class="app-title">AI Workbench</h1>
        <div id="workspace-path" class="workspace-path">No workspace selected</div>
        <div class="header-actions">
            <button id="btn-select" class="btn btn-primary">Select Workspace</button>
            <button id="btn-refresh" class="btn btn-secondary" disabled>Refresh</button>
            <button id="btn-create-feature" class="btn btn-secondary" disabled>+ Feature</button>
            <button id="btn-create-jira" class="btn btn-secondary" disabled title="Select a feature.md to enable">Create Jira</button>
        </div>
    </header>
    <main id="main">
        <aside id="tree-panel">
            <p class="placeholder">Select a workspace to view its structure</p>
        </aside>
        <div id="content-area">
            <section id="content-panel">
                <p class="placeholder">Select a file to view its contents</p>
            </section>
            <section id="analysis-panel" class="hidden">
                <header class="analysis-header">
                    <h3 id="analysis-title">üìä Feature Analysis</h3>
                    <div class="analysis-actions">
                        <button id="btn-cancel-analysis" class="btn btn-small hidden">Cancel</button>
                        <button id="btn-close-analysis" class="btn btn-icon" title="Close">√ó</button>
                    </div>
                </header>
                <div id="analysis-content" class="analysis-body">
                    <p class="placeholder">Click the üîç button on a feature to start analysis.</p>
                </div>
                <footer id="analysis-footer" class="analysis-footer hidden">
                    <button id="btn-submit-answers" class="btn btn-primary" disabled>
                        Submit Answers
                    </button>
                </footer>
            </section>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module" src="js/app.js"></script>

    <!-- Create Jira Modal -->
    <div id="jira-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="jira-modal-title">Create Jira Ticket</h2>
                <button class="modal-close" id="jira-modal-close" aria-label="Close">&times;</button>
            </header>
            <div class="modal-body" id="jira-modal-body">
                <!-- Dynamic content inserted by JS -->
            </div>
            <footer class="modal-footer" id="jira-modal-footer">
                <button class="btn btn-secondary" id="jira-modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="jira-modal-submit">Create Ticket</button>
            </footer>
        </div>
    </div>

    <!-- Create Feature Modal -->
    <div id="create-feature-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2>Create New Feature</h2>
                <button class="modal-close" aria-label="Close">&times;</button>
            </header>
            <form id="create-feature-form" class="modal-body">
                <fieldset class="form-group">
                    <legend>Feature Type</legend>
                    <label class="radio-label">
                        <input type="radio" name="feature-type" value="standalone" checked>
                        <span>Standalone Feature</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="feature-type" value="project">
                        <span>Project Feature</span>
                    </label>
                </fieldset>
                
                <div class="form-group" id="project-select-group" style="display: none;">
                    <label for="project-select">Project</label>
                    <select id="project-select">
                        <option value="">Select a project...</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="feature-name-input">Feature Name</label>
                    <input type="text" id="feature-name-input" 
                           placeholder="my-feature-name" 
                           maxlength="50"
                           autocomplete="off">
                    <span id="feature-name-error" class="field-error"></span>
                </div>
                
                <div class="form-group">
                    <label>Location Preview</label>
                    <code id="location-preview" class="location-preview">features/</code>
                </div>
            </form>
            <footer class="modal-footer">
                <button type="button" class="btn btn-secondary" id="btn-cancel-create">Cancel</button>
                <button type="submit" form="create-feature-form" class="btn btn-primary" id="btn-submit-create" disabled>
                    Create Feature
                </button>
            </footer>
        </div>
    </div>
</body>
</html>
